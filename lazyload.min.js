!function(t,e,n){function i(e){this.settings=t.extend({},s,e),this.imgs=t(e.selector),this.container=t(this.settings.container),this.init()}var o=t(e),r=t(n),s={selector:"img",threshold:50,failure_limit:0,speed:300,event:"scroll",effect:"fadeIn",attr:"original",container:e,nopic:"images/blank.png",defaultImg:"images/default-img.png",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};i.prototype={init:function(){this.process(),this.bindEvent()},bindEvent:function(){var t=this;r.ready(function(){t.update()}),t.container.on(t.settings.event,function(){return t.update()}),o.on("resize",function(){t.update()})},update:function(){var e=this,n=0,i={container:e.settings.container,threshold:e.settings.threshold};e.imgs.each(function(){var o=t(this);if(t.abovethetop(this,i)||t.leftofbegin(this,i));else if(t.belowthefold(this,i)||t.rightoffold(this,i)){if(++n>e.settings.failure_limit)return!1}else o.trigger("appear"),n=0})},process:function(){var e=this;e.imgs.one("appear",function(){var n=t(this),i=n.data(e.settings.attr);if(!n.data("loaded"))if(""==i)n.addClass("def").attr("src",e.settings.nopic).hide()[e.settings.effect](e.settings.speed),n.data("loaded",!0),e.grep(n);else{var o=new Image;o.onload=function(){o.onload=null,n.attr("src",i).hide()[e.settings.effect](e.settings.speed),n.data("loaded",!0),e.grep(n)},o.onerror=function(){o.onerror=null,n.addClass("def").attr("src",e.settings.defaultImg).hide()[e.settings.effect](e.settings.speed),n.data("loaded",!0),e.grep(n)},o.src=i}})},grep:function(){var e=this,n=t.grep(e.imgs,function(e){return!t(e).data("loaded")});e.imgs=t(n)}},t.belowthefold=function(n,i){var r;return r=void 0===i.container||i.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(i.container).offset().top+t(i.container).height(),r<=t(n).offset().top-i.threshold},t.rightoffold=function(n,i){var r;return r=void 0===i.container||i.container===e?o.width()+o.scrollLeft():t(i.container).offset().left+t(i.container).width(),r<=t(n).offset().left-i.threshold},t.abovethetop=function(n,i){var r;return r=void 0===i.container||i.container===e?o.scrollTop():t(i.container).offset().top,r>=t(n).offset().top+i.threshold+t(n).height()},t.leftofbegin=function(n,i){var r;return r=void 0===i.container||i.container===e?o.scrollLeft():t(i.container).offset().left,r>=t(n).offset().left+i.threshold+t(n).width()},e.lazyload=function(t){new i(t)}}(jQuery,window,document);